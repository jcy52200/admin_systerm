(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bea08902"],{"0e8f":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return c})),a.d(t,"b",(function(){return i}));var r=a("b775");function n(){return Object(r["a"])({url:"/company/department"})}function l(){return Object(r["a"])({url:"/sys/user/simple"})}function s(e){return Object(r["a"])({method:"post",url:"/company/department",data:e})}function o(e){return Object(r["a"])({url:"/company/department/".concat(e)})}function c(e){return Object(r["a"])({method:"put",url:"/company/department/".concat(e.id),data:e})}function i(e){return Object(r["a"])({method:"delete",url:"/company/department/".concat(e)})}},1989:function(e,t,a){},"2efc":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return c}));var r=a("b775");function n(e){return Object(r["a"])({url:"/sys/user",params:e})}function l(e){return Object(r["a"])({url:"/salarys/tips/".concat(e)})}function s(e){return Object(r["a"])({url:"/salarys/modify/".concat(e)})}function o(e){return Object(r["a"])({url:"/salarys/modify/".concat(e.userId),method:"post",data:e})}function c(e){return Object(r["a"])({url:"/salarys/init/".concat(e.userId),method:"post",data:e})}},"34e0":function(e,t,a){"use strict";a.r(t);a("14d9"),a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-container"},[t("div",{staticClass:"app-container"},[t("page-tools",{attrs:{"show-before":!0},scopedSlots:e._u([{key:"before",fn:function(){return[e._v(e._s(e.tipsInfo))]},proxy:!0}])},[[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.$router.push("/salarys/setting")}}},[e._v("设置")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$router.push("/salarys/monthStatement?yearMonth=".concat(e.yearMonth))}}},[e._v(e._s(e.yearMonth)+"报表")])]],2),t("el-card",{staticClass:"hr-block"},[t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:"聘用形式:"}},[t("el-checkbox-group",{model:{value:e.formData.approvalsTypeChecks,callback:function(t){e.$set(e.formData,"approvalsTypeChecks",t)},expression:"formData.approvalsTypeChecks"}},e._l(e.approvalsType,(function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id},on:{change:e.changeParams}},[e._v(e._s(a.value))])})),1)],1),t("el-form-item",{attrs:{label:"员工状态:"}},[t("el-checkbox-group",{model:{value:e.formData.approvalsStateChecks,callback:function(t){e.$set(e.formData,"approvalsStateChecks",t)},expression:"formData.approvalsStateChecks"}},e._l(e.approvalsState,(function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id},on:{change:e.changeParams}},[e._v(e._s(a.value))])})),1)],1),t("el-form-item",{attrs:{label:"部门:"}},[t("el-checkbox-group",{model:{value:e.formData.departmentChecks,callback:function(t){e.$set(e.formData,"departmentChecks",t)},expression:"formData.departmentChecks"}},e._l(e.departments,(function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id},on:{change:e.changeParams}},[e._v(e._s(a.name))])})),1)],1)],1)],1),t("el-card",{staticClass:"hr-block"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[t("el-table-column",{attrs:{type:"index",label:"序号"}}),t("el-table-column",{attrs:{prop:"username",label:"姓名"}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),t("el-table-column",{attrs:{prop:"workNumber",label:"工号"}}),t("el-table-column",{attrs:{prop:"formOfEmployment",formatter:e.formatEmployment,width:"100",label:"聘用形式"}}),t("el-table-column",{attrs:{prop:"departmentName",label:"部门"}}),t("el-table-column",{attrs:{prop:"timeOfEntry",width:"130",label:"入职时间"}},[t("span",[e._v(e._s(new Date("2021-10-22").toLocaleDateString()))])]),t("el-table-column",{attrs:{formatter:e.getMoney,label:"工资基数"}}),t("el-table-column",{attrs:{label:"津贴方案",width:"100"}},[e._v("通用方案")])],1),t("el-row",{staticStyle:{height:"50px"},attrs:{type:"flex",justify:"center",align:"middle"}},[t("el-pagination",{attrs:{background:"",layout:"prev,pager,next",total:e.page.total,"current-page":e.page.page,"page-size":e.page.pageSize},on:{"current-change":e.changePage}})],1)],1),t("el-dialog",{attrs:{title:e.topLabel,visible:e.centerDialogVisible,width:"50%",left:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[t(e.currentComponent,{tag:"component",attrs:{"user-salary":e.selectedSalaryInfo,"user-id":e.selectUserId},on:{onDialogCancel:function(t){e.centerDialogVisible=!1}}})],1)],1)])},n=[],l=a("c7eb"),s=a("5530"),o=a("1da1"),c=(a("7db0"),a("d3b7"),a("25f0"),a("2efc")),i=a("0e8f"),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"changeSalary"},[t("div",{staticClass:"infoBox"},[e._m(0),t("div",{staticClass:"info"},[t("p",[t("span",{staticClass:"name"},[e._v(e._s(e.user.username))])]),t("p",[t("span",[e._v("部门：")]),e._v(" "+e._s(e.user.departmentName)+" ")]),t("p",[t("span",[e._v("入职时间：")]),e._v(" "+e._s(e._f("formatDate")(e.user.timeOfEntry))+" ")])])]),t("div",[t("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"调整基本工资"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.userSalary.currentBasicSalary,callback:function(t){e.$set(e.userSalary,"currentBasicSalary",t)},expression:"userSalary.currentBasicSalary"}}),t("span",{staticClass:"Label"},[e._v("->")]),t("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入调整后基本工资",type:"number"},model:{value:e.ruleForm.currentBasicSalary,callback:function(t){e.$set(e.ruleForm,"currentBasicSalary",t)},expression:"ruleForm.currentBasicSalary"}})],1),t("el-form-item",{attrs:{label:"调整岗位工资"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.userSalary.currentPostWage,callback:function(t){e.$set(e.userSalary,"currentPostWage",t)},expression:"userSalary.currentPostWage"}}),t("span",{staticClass:"Label"},[e._v("->")]),t("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入调整后岗位工资",type:"number"},model:{value:e.ruleForm.currentPostWage,callback:function(t){e.$set(e.ruleForm,"currentPostWage",t)},expression:"ruleForm.currentPostWage"}})],1),t("el-form-item",{attrs:{label:"工资合计"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.computeCurrentTotal,callback:function(t){e.computeCurrentTotal=t},expression:"computeCurrentTotal"}}),t("span",{staticClass:"Label"},[e._v("->")]),t("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.computeChangeTotal,callback:function(t){e.computeChangeTotal=t},expression:"computeChangeTotal"}})],1),t("el-form-item",{attrs:{label:"调整幅度"}},[t("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.computeChangeSize,callback:function(t){e.computeChangeSize=t},expression:"computeChangeSize"}})],1),t("div",{staticClass:"buttones",staticStyle:{"text-align":"center","margin-top":"40px"}},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),t("el-button",{on:{click:e.onClose}},[e._v("关闭")])],1)],1)],1)],1)])},p=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:a("616f"),alt:""}})])}],m=(a("a9e3"),a("c24f")),f={name:"UsersTableIndex",props:["userSalary","userId"],data:function(){return{user:{},ruleForm:{}}},computed:{computeCurrentTotal:function(){var e=0;null!=this.userSalary.currentBasicSalary&&(e=Number(this.userSalary.currentBasicSalary));var t=0;return null!=this.userSalary.currentPostWage&&(t=Number(this.userSalary.currentPostWage)),e+t},computeChangeTotal:function(){var e=0;null!=this.ruleForm.currentBasicSalary&&(e=Number(this.ruleForm.currentBasicSalary));var t=0;return null!=this.ruleForm.currentPostWage&&(t=Number(this.ruleForm.currentPostWage)),e+t},computeChangeSize:function(){return this.computeChangeTotal-this.computeCurrentTotal}},created:function(){this.getUserDetailById()},methods:{onSubmit:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.ruleForm,a.userId=e.userId,t.next=4,Object(c["a"])(a);case 4:e.$message({message:"保存成功",type:"success"}),e.$emit("success"),e.onClose();case 7:case"end":return t.stop()}}),t)})))()},onClose:function(){this.ruleForm={},this.$emit("onDialogCancel")},getUserDetailById:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["getUserDetailById"])(e.userId);case 2:e.user=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},b=f,d=(a("3f86"),a("2877")),h=Object(d["a"])(b,u,p,!1,null,"72b5deb2",null),g=h.exports,y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fixedDalary"},[t("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"120px",model:e.formLabelAlign}},[t("el-form-item",{attrs:{label:"当前基本工资"}},[t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前基本工资",type:"number"},model:{value:e.formLabelAlign.currentBasicSalary,callback:function(t){e.$set(e.formLabelAlign,"currentBasicSalary",t)},expression:"formLabelAlign.currentBasicSalary"}})],1),t("el-form-item",{attrs:{label:"当前岗位工资"}},[t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前岗位工资",type:"number"},model:{value:e.formLabelAlign.currentPostWage,callback:function(t){e.$set(e.formLabelAlign,"currentPostWage",t)},expression:"formLabelAlign.currentPostWage"}})],1),t("el-form-item",{attrs:{label:"当前工资合计"}},[t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前工资合计, 自动计算",disabled:!0},model:{value:e.computeCurrentTotal,callback:function(t){e.computeCurrentTotal=t},expression:"computeCurrentTotal"}})],1),t("el-form-item",{attrs:{label:"转正基本工资"}},[t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"转正基本工资",type:"number"},model:{value:e.formLabelAlign.correctionOfBasicWages,callback:function(t){e.$set(e.formLabelAlign,"correctionOfBasicWages",t)},expression:"formLabelAlign.correctionOfBasicWages"}})],1),t("el-form-item",{attrs:{label:"转正岗位工资"}},[t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"转正岗位工资",type:"number"},model:{value:e.formLabelAlign.turnToPostWages,callback:function(t){e.$set(e.formLabelAlign,"turnToPostWages",t)},expression:"formLabelAlign.turnToPostWages"}})],1),t("el-form-item",{attrs:{label:"转正工资合计"}},[t("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"当前基本工资, 自动计算",disabled:!0},model:{value:e.computeTurnTotal,callback:function(t){e.computeTurnTotal=t},expression:"computeTurnTotal"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认")]),t("el-button",{on:{click:e.onClose}},[e._v("关闭")])],1)],1)],1)},v=[],S={name:"UsersTableIndex",props:["userId"],data:function(){return{labelPosition:"left",formLabelAlign:{},turnTotal:0}},computed:{computeCurrentTotal:function(){var e=0;null!=this.formLabelAlign.currentBasicSalary&&(e=Number(this.formLabelAlign.currentBasicSalary));var t=0;return null!=this.formLabelAlign.currentPostWage&&(t=Number(this.formLabelAlign.currentPostWage)),e+t},computeTurnTotal:function(){var e=0;null!=this.formLabelAlign.correctionOfBasicWages&&(e=Number(this.formLabelAlign.correctionOfBasicWages));var t=0;return null!=this.formLabelAlign.turnToPostWages&&(t=Number(this.formLabelAlign.turnToPostWages)),e+t}},methods:{onSubmit:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.formLabelAlign.userId=e.userId,a=e.formLabelAlign,t.next=4,Object(c["e"])(a);case 4:e.$message.success("定薪成功"),e.$emit("success"),e.onClose();case 7:case"end":return t.stop()}}),t)})))()},onClose:function(){this.formLabelAlign={},this.$emit("onDialogCancel")}}},x=S,C=(a("fa0a"),Object(d["a"])(x,y,v,!1,null,"f00f5f4e",null)),k=C.exports,w=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"page-tools"},[t("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",[e.showBefore?t("div",{staticClass:"before"},[t("i",{staticClass:"el-icon-info"}),e._t("before")],2):e._e()]),t("el-col",[t("el-row",{attrs:{type:"flex",justify:"end"}},[e._t("after")],2)],1)],1)],1)},O=[],j={props:{showBefore:{type:Boolean,default:!1}}},_=j,T=(a("bd99"),Object(d["a"])(_,w,O,!1,null,null,null)),L=T.exports,D={name:"UsersTableIndex",components:{ChangeSalary:g,FixedSalary:k,pageTools:L},data:function(){return{seeState:"",centerDialogVisible:!1,topLabel:"转正",approvalsType:[{id:1,value:"正式"},{id:2,value:"非正式"}],approvalsState:[{id:"1",value:"在职"},{id:"2",value:"离职"}],department:[],subsidyScheme:[],list:[],departments:[],loading:!1,page:{total:0,page:1,pageSize:10},tips:{},yearMonth:"",formData:{approvalsTypeChecks:[],approvalsStateChecks:[],departmentChecks:[]},selectedSalaryInfo:{},selectUserId:null,currentComponent:""}},computed:{tipsInfo:function(){return"本月0：入职 0 离职 0 调薪 0 未定薪 0"}},created:function(){this.getEmployeeList(),this.getDepartment()},methods:{getMoney:function(){return[3e3,5e3,6e3,8e3,1e4,12e3,15e3,16e3][Math.floor(8*Math.random())]},formatEmployment:function(e){var t=this.approvalsType.find((function(t){return t.id===e.formOfEmployment.toString()}));return t?t.value:"未知"},getEmployeeList:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a,r,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["b"])(Object(s["a"])(Object(s["a"])({},e.page),e.formData));case 2:a=t.sent,r=a.rows,n=a.total,e.list=r,e.page.total=n,e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},getDepartment:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["c"])();case 2:e.departments=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getTips:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:a=t.sent,r=a.tipsRes,e.tips=r;case 5:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.page.page=e,this.getEmployeeList()},changeSalary:function(e,t){var a=this;return Object(o["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.topLabel="调薪",a.currentComponent=e,a.centerDialogVisible=!0,a.selectUserId=t,r.next=6,Object(c["c"])(t);case 6:a.selectedSalaryInfo=r.sent;case 7:case"end":return r.stop()}}),r)})))()},fixedSalary:function(e){this.topLabel="定薪",this.currentComponent=e,this.centerDialogVisible=!0},changeParams:function(){this.page.page=1,this.getEmployeeList()}}},P=D,A=Object(d["a"])(P,r,n,!1,null,null,null);t["default"]=A.exports},"3f86":function(e,t,a){"use strict";a("1989")},"616f":function(e,t,a){e.exports=a.p+"static/img/img.0615818f.jpeg"},"7db0":function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").find,l=a("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),l(s)},b76d:function(e,t,a){},bd99:function(e,t,a){"use strict";a("ffae")},fa0a:function(e,t,a){"use strict";a("b76d")},ffae:function(e,t,a){}}]);